{"version":3,"sources":["store/cardsFunctions.ts","store/cardsSlice.ts","store/hooks.ts","assets/images/hero.svg","assets/images/hp0.svg","assets/images/hp1.svg","images.ts","assets/images/foe1.svg","assets/images/foe2.svg","assets/images/foe3.svg","components/Cards.tsx","AI/aiFunctions.ts","components/AIButton.tsx","components/Stats.tsx","store/store.ts","components/App.tsx","reportWebVitals.js","index.tsx"],"names":["getRandomCard","id","range","x","y","chance","Math","random","type","hp","trunc","defaultHero","cardsSlice","createSlice","name","initialState","isAIEnabled","cards","Array","fill","scoreCount","hero","isGameOver","reducers","initFill","state","idCounter","i","j","move","payload","clickedCard","clickedX","clickedY","heroX","heroY","isAvailable","hpChange","countHpChange","min","alert","newCards","concat","rowType","swapRowType","row","flat","filter","el","lastRowEl","length","newCard","shiftCards","find","enableAI","disableAI","actions","useAppDispatch","useDispatch","useAppSelector","useSelector","images","0","heal","5","hp0","6","7","hp1","8","foe","1","2","3","CardsPlace","toolkit","cardSlice","dispatch","useEffect","className","map","Cards","desc","isEnabled","props","character","image","onClick","disabled","src","alt","getAvailableCardsInfo","card","findLowestCardByType","availableCards","cardsOfType","sort","a","b","countOptimalByHp","alternative","healsOnCards","currCard","healsOnCard","amount","amountOfHealsOnCard","optimalFoes","variant","console","log","JSON","stringify","cardWithMoreHeals","AIButton","aiMove","setTimeout","cardToPlay","minHeal","minFoe","countAlternative","countCard","startPlaying","Stats","score","rootReducer","combineReducers","store","configureStore","reducer","App","target","href","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4f27f994.chunk.js","sourcesContent":["import { Card, Coords } from \"../types\";\r\n\r\nexport const isAvailable = ([clickedX, clickedY]:Coords, [heroX, heroY]:Coords):boolean => {\r\n  if (heroX === clickedX && heroY === clickedY) {\r\n    return false\r\n  }\r\n  return ((heroX + 1 === clickedX || \r\n        heroX - 1 === clickedX) && heroY === clickedY) ||\r\n        ((heroY + 1 === clickedY ||\r\n        heroY - 1 === clickedY) && heroX === clickedX)\r\n}\r\n\r\nexport const shiftCards = (cards:Card[][], hero:Card, clickedCard:Card) => {\r\n  const newCards:Card[][] = cards.concat()\r\n\r\n  const rowType = hero.x === clickedCard.x ? 'x' : 'y';\r\n  const swapRowType = rowType === 'x' ? 'y' : 'x';\r\n  \r\n  const row = newCards.flat().filter(el => el[rowType] === hero[rowType]);\r\n  \r\n  const lastRowEl = row[clickedCard[swapRowType] < hero[swapRowType] ? row.length - 1 : 0]\r\n  \r\n  newCards[clickedCard.x][clickedCard.y].type = hero.type;\r\n  newCards[clickedCard.x][clickedCard.y].hp = hero.hp\r\n  \r\n  if (lastRowEl.type !== 'hero') {\r\n    newCards[hero.x][hero.y].type = lastRowEl.type;\r\n    newCards[hero.x][hero.y].hp = lastRowEl.hp\r\n  }\r\n  \r\n  const newCard = getRandomCard(lastRowEl.id, [lastRowEl.x, lastRowEl.y], 2)\r\n  \r\n  lastRowEl.type = newCard.type;\r\n  lastRowEl.hp = newCard.hp;\r\n  \r\n  return newCards\r\n}\r\n\r\nexport const getRandomCard = (id:number, [x, y]:[number, number], range:number):Card => {\r\n  const chance = Math.random() * 8;\r\n  return { \r\n    id: id,\r\n    x: x,\r\n    y: y,\r\n    type: chance > range ? 'foe' : 'heal',\r\n    hp: chance > range ? Math.trunc(Math.random() * (4 - 1) + 1) : \r\n    Math.trunc(Math.random() * (9 - 5) + 5)\r\n  }\r\n}\r\n\r\nexport const countHpChange = (clickedCard:Card) => (clickedCard.type === 'foe' ? -1 : 1) * clickedCard.hp","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { Card, State } from \"../types\";\r\nimport { isAvailable, shiftCards, getRandomCard, countHpChange } from \"./cardsFunctions\";\r\n\r\nconst defaultHero:Card = {\r\n  id: 4,\r\n  x: 1,\r\n  y: 1,\r\n  type: 'hero',\r\n  hp: 10\r\n}\r\n\r\nconst cardsSlice = createSlice({\r\n  name: 'cards',\r\n  initialState: {\r\n    isAIEnabled: false,\r\n    cards: Array(3).fill([]),\r\n    scoreCount: 0,\r\n    hero: defaultHero,\r\n    isGameOver: true\r\n  },\r\n  reducers: {\r\n    initFill(state:State) {\r\n      let idCounter = -1\r\n      state.isAIEnabled = false\r\n      state.scoreCount = 0\r\n      state.hero = defaultHero\r\n      for (let i = 0; i < 3; i++) {\r\n        for (let j = 0; j < 3; j++) {\r\n          state.cards[i][j] = getRandomCard(++idCounter, [i, j], 3);\r\n        }\r\n      }\r\n      state.cards[state.hero.x][state.hero.y] = state.hero\r\n      state.isGameOver = false\r\n    }, \r\n    move(state:State, { payload: [x, y] }) {\r\n      const clickedCard = state.cards[x][y]\r\n\r\n      if (isAvailable([x, y], [state.hero.x, state.hero.y])) { \r\n        const hpChange =  countHpChange(clickedCard);\r\n\r\n        state.hero.hp = Math.min(state.hero.hp + hpChange, 10)\r\n  \r\n        if (state.hero.hp <= 0) {\r\n          alert(`Game over! Your score ${state.scoreCount}`)\r\n          state.isAIEnabled = false\r\n          state.isGameOver = true\r\n        }\r\n\r\n        if (hpChange < 0 && state.hero.hp > 0) {\r\n          state.scoreCount++\r\n        }\r\n        \r\n        state.cards = shiftCards(state.cards, state.hero, clickedCard); \r\n\r\n        state.hero = state.cards.flat().find((el:Card) => el.type === 'hero') as Card        \r\n      }\r\n    },\r\n    enableAI(state:State) {\r\n      state.isAIEnabled = true\r\n    },\r\n    disableAI(state:State) {\r\n      state.isAIEnabled = false\r\n    }\r\n  }\r\n})\r\n\r\nexport default cardsSlice.reducer\r\nexport const {initFill, move, enableAI, disableAI} = cardsSlice.actions","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux'\r\nimport type { RootState, AppDispatch } from './store'\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector","export default __webpack_public_path__ + \"static/media/hero.5b2609bc.svg\";","export default __webpack_public_path__ + \"static/media/hp0.013dd3c2.svg\";","export default __webpack_public_path__ + \"static/media/hp1.17d3ee61.svg\";","import hero from './assets/images/hero.svg'\r\nimport hp0 from './assets/images/hp0.svg'\r\nimport hp1 from './assets/images/hp1.svg'\r\nimport foe1 from './assets/images/foe1.svg'\r\nimport foe2 from './assets/images/foe2.svg'\r\nimport foe3 from './assets/images/foe3.svg'\r\nimport { Images } from './types'\r\n\r\nexport const images:Images = {\r\n  hero: {0: hero},\r\n  heal: {5: hp0, 6: hp0, 7: hp1, 8: hp1},\r\n  foe: {1: foe1, 2: foe2, 3: foe3},\r\n}","export default __webpack_public_path__ + \"static/media/foe1.c477179c.svg\";","export default __webpack_public_path__ + \"static/media/foe2.91be41a9.svg\";","export default __webpack_public_path__ + \"static/media/foe3.b4c66bde.svg\";","import { Card } from '../types';\r\nimport { initFill, move } from '../store/cardsSlice';\r\nimport { useAppDispatch, useAppSelector } from '../store/hooks'\r\nimport { useEffect } from 'react';\r\n\r\nimport '../assets/styles/cards.css'\r\n\r\nimport { images } from '../images';\r\n\r\nexport function CardsPlace() {\r\n  const {cards, isGameOver, isAIEnabled} = useAppSelector(({cardSlice: toolkit}) => {\r\n    return {cards: toolkit.cards.flat(), isGameOver: toolkit.isGameOver, isAIEnabled: toolkit.isAIEnabled}\r\n  })\r\n  const dispatch = useAppDispatch()\r\n  useEffect(() => {\r\n    if (isGameOver) dispatch(initFill())\r\n  }, [isGameOver])\r\n  \r\n  return (\r\n    <div className='cards-place'>\r\n      {cards.map((el:Card) => \r\n        <Cards desc={el} isEnabled={isAIEnabled} key={el.id} />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function Cards(props:{desc:Card, isEnabled:boolean}) {\r\n  const dispatch = useAppDispatch()\r\n  const character = props.desc;\r\n\r\n  const image = images[character.type][character.type === 'hero' ? 0 : character.hp]\r\n\r\n  return (\r\n    <button\r\n      className={`card card-${character.type}`} \r\n      onClick={() => {dispatch(move([character.x, character.y]))}}\r\n      disabled={props.isEnabled}>\r\n      <img \r\n        src = {image}\r\n        alt={character.type} \r\n        className='card-image'/>\r\n      <p className='card-text'> {character.hp}{character.type === 'hero' ? '/10' : ''}</p>\r\n    </button>\r\n  )\r\n}","import { Card, CardTypes, Coords, HealsByCard } from \"../types\";\r\n\r\nconst getAvailableCardsInfo = ([heroX, heroY]:Coords, cards:Card[]):Card[] => {\r\n  const availableCards:Card[] = cards.filter(card => \r\n    (card.x === heroX && card.y + 1 === heroY) || \r\n    (card.x === heroX && card.y - 1 === heroY) || \r\n    (card.x + 1 === heroX && card.y === heroY) || \r\n    (card.x - 1 === heroX && card.y === heroY)\r\n  )\r\n\r\n  return availableCards\r\n}\r\n\r\nconst findLowestCardByType = (availableCards:Card[], type:CardTypes):Card | null => {\r\n  const cardsOfType = availableCards.filter(card => card.type === type)\r\n  if (cardsOfType) {\r\n    cardsOfType.sort((a:Card, b:Card) => {///////////////////////////////// \r\n      if (a.hp < b.hp) {\r\n        return -1\r\n      } \r\n      return 1\r\n    })\r\n\r\n    return cardsOfType[0]\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n\r\nconst amountOfHealsOnCard = (currCard:Card, cards:Card[][]):HealsByCard => {\r\n  const availableCards = getAvailableCardsInfo([currCard.x, currCard.y], cards.flat());\r\n  \r\n  const healsOnCard = availableCards.filter(el => el.type === 'heal').length\r\n  \r\n  return {id: currCard.id, amount: healsOnCard}\r\n}\r\n\r\nconst countOptimalByHp = (availableCards:Card[], cards:Card[][], alternative:Card, hero:Card):Card => {\r\n  const healsOnCards = availableCards.map(el => amountOfHealsOnCard(el, cards))\r\n  healsOnCards.sort((a:HealsByCard, b:HealsByCard) => {\r\n    if (a.amount > b.amount) {\r\n      return -1\r\n    } \r\n    return 1\r\n  })\r\n  \r\n  if (healsOnCards[0].amount === 0) {\r\n    return alternative\r\n  } \r\n  \r\n  const allVariantsByHP = healsOnCards.filter(el => el.amount === healsOnCards[0].amount)\r\n\r\n  const optimalFoes = allVariantsByHP.map(variant => {\r\n    return availableCards.find(card => card.id === variant.id) as Card\r\n  }).sort((a:Card, b:Card) => {\r\n    if (a.hp < b.hp) {\r\n      return -1\r\n    } \r\n    return 1\r\n  })  \r\n  \r\n  console.log(JSON.stringify(optimalFoes) + '\\n\\r\\n\\r');\r\n\r\n  const cardWithMoreHeals = optimalFoes[0]\r\n\r\n  console.log(cardWithMoreHeals, ' | ', alternative);\r\n  \r\n\r\n  if (cardWithMoreHeals.hp < hero.hp) {\r\n    return cardWithMoreHeals\r\n  }\r\n  return alternative\r\n}\r\n\r\nconst countAlternative = (minFoe:Card, minHeal:Card, hero:Card):Card => {\r\n  if (minHeal) {\r\n    if (!minFoe) {\r\n      return minHeal\r\n    } \r\n    if (hero.hp > minFoe.hp * 2) {\r\n      return minFoe\r\n    } else {\r\n      return minHeal\r\n    }\r\n  }   \r\n  return minFoe\r\n}\r\n\r\nexport const countCard = (hero:Card, cards:Card[][]):Card => {\r\n  const availableCards = getAvailableCardsInfo([hero.x, hero.y], cards.flat());\r\n\r\n  const minHeal = findLowestCardByType(availableCards, 'heal')\r\n  const minFoe = findLowestCardByType(availableCards, 'foe')\r\n  \r\n  const alternative = countAlternative(minFoe as Card, minHeal as Card, hero)\r\n\r\n  return countOptimalByHp(availableCards, cards, alternative, hero)\r\n}","import { countCard } from '../AI/aiFunctions';\r\nimport { move, enableAI, disableAI } from '../store/cardsSlice';\r\nimport { useAppDispatch, useAppSelector } from \"../store/hooks\"\r\nimport { useEffect } from 'react';\r\n\r\nexport const AIButton = () => {\r\n  const {cards, isGameOver, hero, isAIEnabled} = useAppSelector(({cardSlice: toolkit}) => {\r\n    return {cards: toolkit.cards, isGameOver: toolkit.isGameOver, hero: toolkit.hero, isAIEnabled: toolkit.isAIEnabled}\r\n  })\r\n  const dispatch = useAppDispatch()\r\n\r\n  useEffect(() => {\r\n    if (!isGameOver && isAIEnabled) {\r\n      aiMove()\r\n    }\r\n  }, [cards])\r\n\r\n  const aiMove = () => {\r\n    setTimeout(() => {\r\n      const cardToPlay = countCard(hero, cards);\r\n      console.log(cardToPlay);\r\n      \r\n      dispatch(move([cardToPlay.x, cardToPlay.y]))\r\n    }, 1000)\r\n  }\r\n\r\n  const startPlaying = async () => {\r\n    isAIEnabled ? dispatch(disableAI()) : dispatch(enableAI())\r\n\r\n    aiMove()\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <button \r\n        className={`ai-button ${isAIEnabled ? 'ai-active' : ''}`}\r\n        onClick={() => {startPlaying()}}>\r\n        {isAIEnabled ? 'Disable auto play' : 'Enable auto play'}\r\n      </button>\r\n    </>\r\n  )\r\n} ","import { useAppSelector } from '../store/hooks'\r\nimport { AIButton } from './AIButton'\r\n\r\nexport function Stats () {\r\n  const score = useAppSelector(({cardSlice: toolkit}) => {\r\n    return toolkit.scoreCount\r\n  })\r\n  return (\r\n    <div className=\"stats\">\r\n      <h3>\r\n        Score: {score}\r\n      </h3>\r\n      <AIButton />\r\n    </div>\r\n  )\r\n}","import { combineReducers, configureStore } from '@reduxjs/toolkit';\r\nimport cardSlice from './cardsSlice';\r\n\r\nconst rootReducer = combineReducers({\r\n  cardSlice: cardSlice\r\n})\r\n\r\nexport const store = configureStore({\r\n  reducer: rootReducer,\r\n})\r\n\r\nexport type RootState = ReturnType<typeof store.getState>\r\nexport type AppDispatch = typeof store.dispatch","import \"../assets/styles/index.css\"\nimport \"../assets/styles/small.css\"\nimport { CardsPlace } from \"./Cards\";\nimport { Stats } from \"./Stats\";\nimport { Provider } from \"react-redux\";\nimport { store } from \"../store/store\";\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <div className=\"root\">\n        <header>\n          <h1>Dungeon Cards AI</h1>\n        </header>\n        <main>\n            <Stats />\n            <CardsPlace />\n        </main>\n        <footer>\n          <a target=\"blank\" href=\"https://github.com/blackpawsstudio\">GitHub</a>\n          <a target=\"blank\" href=\"https://play.google.com/store/apps/details?id=com.The717pixels.DungeonCards&hl=ru&gl=US\">Original game</a>\n        </footer>\n      </div>\n    </Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport {render} from 'react-dom';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nrender(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}